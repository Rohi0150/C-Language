# Switch Statement in C

This document provides a comprehensive overview of the switch statement in C, covering its purpose, syntax, rules, fall-through behavior, and advanced usage patterns.

---

## 1. Introduction to Switch

The **switch** concept is a selective flow control mechanism used primarily for **menu-driven programs**. It is ideal for scenarios where a user is presented with **n choices** and must select one or more, such as:

- Calling a customer care center (e.g., "press 1 for English, 2 for Hindi")
- Selecting items from a restaurant menu
- Navigating application menus

---

## 2. Core Logic and Syntax

The basic syntax requires a **switch argument** (a choice). The compiler looks for a **matched case** based on that choice.

### Basic Syntax

```c
switch (expression) {
    case constant1:
        // Code for case 1
        break;
    case constant2:
        // Code for case 2
        break;
    default:
        // Code when no case matches
}
```

### Execution Rules

1. **Matched Case**: If a match is found, the program executes the code from that case until it hits a `break` statement or reaches the end of the switch.
2. **Default Case**: If no case matches the choice, the program executes the `default` case.
3. **No Match & No Default**: If there is no matched case and no `default` case, the program simply exits the switch block.

### Example of Basic Logic

```c
int a = 2;
switch (a) {
    case 1: 
        printf("A"); 
        break;
    case 2: 
        printf("B"); 
        break;  // Matches here
    case 3: 
        printf("C"); 
        break;
    default: 
        printf("D");
}
```

**Output**: `B`

**Explanation**: Since `a` is `2`, the program finds `case 2:`, executes `printf("B")`, and then exits due to the `break` statement.

---

## 3. Important Rules and Characteristics

### Rule 1: Fall-through Behavior (The `break` Keyword)

If a `break` statement is **missing**, the execution will **fall through** to subsequent cases regardless of whether they match the choice.

#### Example: Fall-through Without Break

```c
int a = 2;
switch (a) {
    case 1: 
        printf("A");
        // No break
    case 2: 
        printf("B");
        // No break - falls through!
    case 3: 
        printf("C");
        break;
    default: 
        printf("D");
}
```

**Output**: `BC`

**Explanation**: After matching `case 2:` and printing `B`, the absence of `break` causes the program to continue executing `case 3:`, printing `C`.

#### Crucial Point

If a normal case is executed and has no `break`, the **default case can also be executed**.

```c
int a = 2;
switch (a) {
    case 2: 
        printf("B");
        // No break
    default: 
        printf("D");
}
```

**Output**: `BD`

---

### Rule 2: Case Order and Default Placement

#### Order Doesn't Matter

Cases can be written in **any order** (e.g., 3, 2, 39, -7).

```c
switch (a) {
    case 3: printf("Three"); break;
    case 1: printf("One"); break;
    case 2: printf("Two"); break;
}
```

#### Default Placement

While it is **good practice** to put `default` at the end, it can technically be placed **anywhere** within the switch block.

```c
switch (a) {
    case 1: printf("One"); break;
    default: printf("Other"); break;  // Can be here
    case 2: printf("Two"); break;
}
```

#### Negative Cases

Case values can be **negative**.

```c
switch (a) {
    case -1: printf("Negative One"); break;
    case 0: printf("Zero"); break;
    case 1: printf("Positive One"); break;
}
```

---

### Rule 3: Case Labels Must Be Constant Expressions

#### No Variables

You **cannot** use a variable as a case label.

```c
int x = 5;
switch (a) {
    case x:  // ‚ùå ERROR: Case label not a constant
        printf("Invalid");
        break;
}
```

#### Constant Expressions Allowed

Case labels can be **expressions** (like `5 - 8` or `2 + 1`), but they must evaluate to a constant.

```c
switch (a) {
    case 2 + 1:  // ‚úÖ Valid: Evaluates to 3
        printf("Three");
        break;
    case 5 - 8:  // ‚úÖ Valid: Evaluates to -3
        printf("Negative Three");
        break;
}
```

#### Unique Expressions Required

Case labels must be **unique**. Duplicate case labels will cause a compilation error.

```c
switch (a) {
    case 2: printf("Two"); break;
    case 2: printf("Also Two"); break;  // ‚ùå ERROR: Duplicate case value
}
```

#### Integer Only (No Float)

Case labels must be **integer constant expressions**. Float values are **strictly not allowed**.

```c
switch (a) {
    case 1.5:  // ‚ùå ERROR: Case label not an integer
        printf("Invalid");
        break;
}
```

---

### Rule 4: Syntax Nuance - Labels vs. Cases

There must be a **space** between the `case` keyword and the constant (e.g., `case 1:`).

If there is **no space** (e.g., `case1:`), the compiler treats it as a **label for a `goto` statement** rather than a switch case.

```c
switch (a) {
    case1:  // ‚ùå Treated as goto label, not a case!
        printf("This won't match");
        break;
    case 1:  // ‚úÖ Correct syntax
        printf("This will match");
        break;
}
```

**Result**: This will not cause an error but will lead to the case being ignored, often resulting in the `default` case executing instead.

---

## 4. Keywords and Common Errors

### The `continue` Keyword

The `continue` keyword **cannot** be used directly inside a `switch` unless the switch is inside a loop.

#### ‚ùå Invalid Usage

```c
switch (a) {
    case 1:
        continue;  // ERROR: Continue keyword outside loop
        break;
}
```

**Error Message**: `"Continue keyword outside loop"`

#### ‚úÖ Valid Usage (Switch Inside Loop)

```c
for (int i = 1; i <= 5; i++) {
    switch (i) {
        case 3:
            continue;  // ‚úÖ Valid: Skips to next iteration
        default:
            printf("%d ", i);
    }
}
```

**Output**: `1 2 4 5` (skips 3)

---

### Unreachable Code Warning

Any code written inside the switch block but **before the first case or default** is considered **unreachable code**. The compiler will issue a warning.

```c
switch (a) {
    printf("This is unreachable");  // ‚ö†Ô∏è WARNING: Unreachable code
    case 1:
        printf("One");
        break;
}
```

**Reason**: There is no way for the program to execute the `printf` statement before any case label.

---

## 5. Advanced Usage

### Grouping Cases

When multiple choices require the **same action**, you can group cases together to avoid redundant code.

```c
int a = 4;
switch (a) {
    case 2:
    case 4:
    case 6:
        printf("Even");  // Common job for 2, 4, and 6
        break;
    case 1:
    case 3:
    case 5:
        printf("Odd");
        break;
    default:
        printf("Out of range");
}
```

**Output**: `Even`

**Explanation**: Cases 2, 4, and 6 all share the same code block. When `a = 4`, it matches `case 4:` and falls through to execute the shared code.

---

### Switch Inside a Loop

When a switch is nested inside a loop:

#### `break` Behavior

A `break` statement inside the switch will **only exit the switch**, not the loop.

```c
for (int i = 1; i <= 5; i++) {
    switch (i) {
        case 3:
            printf("[Skip 3] ");
            break;  // Exits switch only, not the for loop
        default:
            printf("%d ", i);
    }
}
```

**Output**: `1 2 [Skip 3] 4 5`

#### `continue` Behavior

A `continue` statement inside the switch will skip the current loop iteration and move to the next iteration because `continue` always refers to the **nearest enclosing loop**.

```c
for (int i = 1; i <= 5; i++) {
    switch (i) {
        case 3:
            continue;  // Skips rest of loop iteration
        default:
            printf("%d ", i);
    }
    printf("[After switch] ");  // This won't print for i=3
}
```

**Output**: `1 [After switch] 2 [After switch] 4 [After switch] 5 [After switch]`

---

## 6. Practical Example: Menu-Driven Program

```c
#include <stdio.h>

int main() {
    int choice;
    
    printf("Menu:\n");
    printf("1. Add\n");
    printf("2. Subtract\n");
    printf("3. Multiply\n");
    printf("4. Divide\n");
    printf("Enter your choice: ");
    scanf("%d", &choice);
    
    switch (choice) {
        case 1:
            printf("You selected Addition\n");
            break;
        case 2:
            printf("You selected Subtraction\n");
            break;
        case 3:
            printf("You selected Multiplication\n");
            break;
        case 4:
            printf("You selected Division\n");
            break;
        default:
            printf("Invalid choice!\n");
    }
    
    return 0;
}
```

---

## 7. Summary Checklist

| Aspect              | Rule/Behavior                                                              |
|---------------------|---------------------------------------------------------------------------|
| **Execution**       | Matched case ‚Üí execute until `break` or end                               |
| **Constants**       | Only integer constants/expressions allowed; no variables or floats        |
| **Uniqueness**      | No duplicate case labels                                                  |
| **Flexibility**     | Any order for cases; `default` can be anywhere                            |
| **Fall-through**    | Without `break`, execution continues to next case                         |
| **Negative Values** | Case values can be negative                                               |
| **Spacing**         | Space required between `case` and value (or becomes goto label)           |
| **Unreachable**     | Code before first case is unreachable                                     |
| **Continue**        | Only valid if switch is inside a loop                                     |
| **Break in Loop**   | `break` exits switch only, not the enclosing loop                         |

---

## Summary

The `switch` statement is a powerful control structure for handling multiple discrete choices in a clean, readable manner. Understanding its fall-through behavior, constant expression requirements, and interaction with loops is essential for writing bug-free menu-driven programs.

**Key Points:**
- Use for menu-driven programs with multiple discrete choices
- Cases must be integer constant expressions (no variables, no floats)
- `break` prevents fall-through to next case
- `default` handles unmatched cases
- Can group multiple cases for the same action
- `continue` only works if switch is inside a loop
- Watch for unreachable code and spacing errors

---

**Happy Coding! üöÄ**
